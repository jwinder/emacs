<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-12-17 Sat 12:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>jwinder emacs config</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Joe Winder" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">jwinder emacs config</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgeedf810">1. introduction</a>
<ul>
<li><a href="#org0d71a31">1.1. getting started</a></li>
<li><a href="#orgf39068e">1.2. org configs</a></li>
<li><a href="#org0649823">1.3. contents of init.el</a></li>
<li><a href="#orgc93c5b0">1.4. personal info</a></li>
</ul>
</li>
<li><a href="#org9db1b1b">2. dependencies</a>
<ul>
<li><a href="#orgb797412">2.1. packages</a>
<ul>
<li><a href="#orgc35ee4c">2.1.1. common</a></li>
<li><a href="#org1211fd2">2.1.2. languages</a></li>
</ul>
</li>
<li><a href="#org142f8cc">2.2. helper functions</a></li>
</ul>
</li>
<li><a href="#org4ac9693">3. customization</a>
<ul>
<li><a href="#org0898458">3.1. env</a></li>
<li><a href="#orgb0e9521">3.2. style</a></li>
<li><a href="#orgf21a174">3.3. settings</a></li>
<li><a href="#org4079399">3.4. functions</a>
<ul>
<li><a href="#orgbd4b98f">3.4.1. common</a></li>
<li><a href="#orge5166f5">3.4.2. contact</a></li>
<li><a href="#org1cd6498">3.4.3. emacs</a></li>
<li><a href="#orgba83bcd">3.4.4. random</a></li>
</ul>
</li>
<li><a href="#org1792a19">3.5. key bindings</a></li>
<li><a href="#org3ea6d24">3.6. eshell</a></li>
<li><a href="#org742583f">3.7. rcirc</a></li>
<li><a href="#org674f85c">3.8. helm</a></li>
<li><a href="#orgf93512a">3.9. magit</a></li>
<li><a href="#orge6fa64d">3.10. org</a></li>
<li><a href="#orgfb5d706">3.11. sbt</a></li>
<li><a href="#org2c3134e">3.12. sonic pi</a></li>
</ul>
</li>
<li><a href="#orgb53504d">4. private</a></li>
<li><a href="#org6860ba8">5. finally</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgeedf810" class="outline-2">
<h2 id="orgeedf810"><span class="section-number-2">1</span> introduction</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-org0d71a31" class="outline-3">
<h3 id="org0d71a31"><span class="section-number-3">1.1</span> getting started</h3>
<div class="outline-text-3" id="text-1-1">
<p>
I prefer to clone this repository as <code>$HOME/emacs-config</code> and symlink it to <code>$HOME/.emacs.d`</code>
</p>
<div class="org-src-container">
<pre class="src src-sh">git clone git@github.com:jwinder/emacs-config.git $<span style="color: #e7c547;">HOME</span>/emacs-config
ln -s $<span style="color: #e7c547;">HOME</span>/emacs-config $<span style="color: #e7c547;">HOME</span>/.emacs.d
</pre>
</div>

<p>
You can also create symlinks to a <code>private</code> directory or <code>private.org</code> file in a safe place, containing private or personal settings. This works well for irc passwords, tramp helpers, etc.
</p>
<div class="org-src-container">
<pre class="src src-sh">ln -s /path/to/your/safe/directory $<span style="color: #e7c547;">HOME</span>/emacs-config/private <span style="color: #969896;"># </span><span style="color: #969896;">directory of elisp files</span>
ln -s /path/to/your/safe/private.org $<span style="color: #e7c547;">HOME</span>/emacs-config/private.org <span style="color: #969896;"># </span><span style="color: #969896;">file containing elisp segments</span>
</pre>
</div>

<p>
Now, start emacs.
</p>
</div>
</div>

<div id="outline-container-orgf39068e" class="outline-3">
<h3 id="orgf39068e"><span class="section-number-3">1.2</span> org configs</h3>
<div class="outline-text-3" id="text-1-2">
</div>
</div>

<div id="outline-container-org0649823" class="outline-3">
<h3 id="org0649823"><span class="section-number-3">1.3</span> contents of init.el</h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">
<pre class="src src-sh">cat init.el
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc93c5b0" class="outline-3">
<h3 id="orgc93c5b0"><span class="section-number-3">1.4</span> personal info</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">jw-config-author-name</span> <span style="color: #deb887;">"Joe Winder"</span>)
(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">jw-config-author-email</span> <span style="color: #deb887;">"jsph.winder@gmail.com"</span>)
(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">jw-config-author-url</span> <span style="color: #deb887;">"http://jwinder.github.io"</span>)
(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">jw-config-github-url</span> <span style="color: #deb887;">"https://github.com/jwinder/emacs-config"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9db1b1b" class="outline-2">
<h2 id="org9db1b1b"><span class="section-number-2">2</span> dependencies</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgb797412" class="outline-3">
<h3 id="orgb797412"><span class="section-number-3">2.1</span> packages</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-orgc35ee4c" class="outline-4">
<h4 id="orgc35ee4c"><span class="section-number-4">2.1.1</span> common</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">afternoon-theme</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">scratch</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">ob-http</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">ob-translate</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">org-pomodoro</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">htmlize</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">magit</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">magit-gh-pulls</span>
  <span style="color: #f08080;">:config</span> (add-hook 'magit-mode-hook 'turn-on-magit-gh-pulls))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">browse-at-remote</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">gist</span>
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">setq</span> gist-view-gist t))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">undo-tree</span>
  <span style="color: #f08080;">:config</span> (global-undo-tree-mode 1))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">expand-region</span>
  <span style="color: #f08080;">:bind</span> ((<span style="color: #deb887;">"C-="</span> . er/expand-region)
         (<span style="color: #deb887;">"C-+"</span> . er/contract-region)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">multiple-cursors</span>
  <span style="color: #f08080;">:bind</span> ((<span style="color: #deb887;">"C-*"</span> . mc/mark-all-like-this)
         (<span style="color: #deb887;">"C-&lt;"</span> . mc/mark-previous-like-this)
         (<span style="color: #deb887;">"C-&gt;"</span> . mc/mark-next-like-this)
         (<span style="color: #deb887;">"C-x r t"</span> . mc/edit-lines)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">smartparens</span>
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">progn</span> (<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">smartparens-config</span>)
                 (smartparens-global-mode t)
                 (sp-use-smartparens-bindings)
                 (define-key sp-keymap (kbd <span style="color: #deb887;">"M-&lt;backspace&gt;"</span>) nil)
                 (define-key sp-keymap (kbd <span style="color: #deb887;">"C-M-p"</span>) nil)
                 (define-key sp-keymap (kbd <span style="color: #deb887;">"C-M-n"</span>) nil)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">company</span>
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">progn</span> (global-company-mode t)
                 (<span style="color: #00bfff;">setq</span> company-idle-delay nil
                       company-tooltip-idle-delay nil)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">flycheck</span>
  <span style="color: #f08080;">:pin</span> melpa-stable
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">progn</span> (<span style="color: #00bfff;">setq</span> flycheck-standard-error-navigation nil
                       flycheck-display-errors-function nil)
                 (global-flycheck-mode)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-ag</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-swoop</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-projectile</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-flycheck</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-flyspell</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-descbinds</span>)
(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">helm-company</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">docker</span>
  <span style="color: #f08080;">:config</span> (docker-global-mode t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1211fd2" class="outline-4">
<h4 id="org1211fd2"><span class="section-number-4">2.1.2</span> languages</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">yaml-mode</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">markdown-mode</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">dockerfile-mode</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">scala-mode</span>
  <span style="color: #f08080;">:mode</span> ((<span style="color: #deb887;">"\\.scala$"</span> . scala-mode)
         (<span style="color: #deb887;">"\\.sbt$"</span> . scala-mode))
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">progn</span> (<span style="color: #00bfff;">setq</span> scala-indent:align-forms t
                       scala-indent:align-parameters t)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">sbt-mode</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">ensime</span>
  <span style="color: #f08080;">:pin</span> melpa-stable
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">progn</span> (<span style="color: #00bfff;">setq</span> ensime-use-helm t)
                 (add-hook 'scala-mode-hook 'ensime-scala-mode-hook)
                 (advice-add 'ensime-sbt-test-dwim
                             <span style="color: #f08080;">:around</span> '(lambda (original-function <span style="color: #98f5ff;">&amp;rest</span> args)
                                        (<span style="color: #00bfff;">let*</span> ((original-command (car args))
                                               (only-zzz-str (<span style="color: #00bfff;">if</span> current-prefix-arg <span style="color: #deb887;">" -- ex zzz "</span> <span style="color: #deb887;">""</span>))
                                               (command (concat original-command only-zzz-str)))
                                          (apply original-function (cons command (cdr args))))))))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">ruby-mode</span>
  <span style="color: #f08080;">:mode</span> ((<span style="color: #deb887;">"Gemfile$"</span> . ruby-mode)
         (<span style="color: #deb887;">"Rakefile$"</span> . ruby-mode)
         (<span style="color: #deb887;">"Vagrantfile$"</span> . ruby-mode)
         (<span style="color: #deb887;">"Berksfile$"</span> . ruby-mode)))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">inf-ruby</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">go-mode</span>
  <span style="color: #f08080;">:config</span> (add-hook 'before-save-hook 'gofmt-before-save))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">haskell-mode</span>
  <span style="color: #f08080;">:config</span> (add-hook 'haskell-mode-hook 'turn-on-haskell-indent))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">coffee-mode</span>
  <span style="color: #f08080;">:config</span> (<span style="color: #00bfff;">setq</span> coffee-tab-width 2))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">terraform-mode</span>
  <span style="color: #f08080;">:mode</span> (<span style="color: #deb887;">"\\.tfstate$"</span> . js-mode))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">protobuf-mode</span>)

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">groovy-mode</span>
  <span style="color: #f08080;">:mode</span> (<span style="color: #deb887;">"Jenkinsfile$"</span> . groovy-mode))

(<span style="color: #00bfff;">use-package</span> <span style="color: #a2cd5a;">markdown-mode</span>
  <span style="color: #f08080;">:mode</span> ((<span style="color: #deb887;">"\\.md$"</span> . gfm-mode)
         (<span style="color: #deb887;">"\\.markdown$"</span> . gfm-mode)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org142f8cc" class="outline-3">
<h3 id="org142f8cc"><span class="section-number-3">2.2</span> helper functions</h3>
<div class="outline-text-3" id="text-2-2">
<p>
These are non-interactive library functions useful in other parts of this config
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">jw--mode-line-color</span> <span style="color: #deb887;">"#22083397778B"</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--font-name</span> (<span style="color: #98f5ff;">&amp;optional</span> size)
  (<span style="color: #00bfff;">if</span> size (concat <span style="color: #deb887;">"Monaco "</span> size) <span style="color: #deb887;">"Monaco"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--set-font-size</span> (size)
  (set-face-attribute 'default nil <span style="color: #f08080;">:font</span> (jw--font-name size)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--login-shell</span> ()
  (file-name-nondirectory (getenv <span style="color: #deb887;">"SHELL"</span>)))

(<span style="color: #00bfff;">defmacro</span> <span style="color: #daa520;">jw--define-menu</span> (name doc <span style="color: #98f5ff;">&amp;rest</span> args)
  (<span style="color: #00bfff;">declare</span> (indent defun))
  (<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">magit-popup</span>)
  `(<span style="color: #00bfff;">progn</span> (<span style="color: #00bfff;">magit-define-popup</span> ,name ,doc ,@args)))

(<span style="color: #00bfff;">defmacro</span> <span style="color: #daa520;">jw--save-current-message</span> (<span style="color: #98f5ff;">&amp;rest</span> body)
  <span style="color: #ffe4b5;">"Saves `</span><span style="color: #a2cd5a;">current-message</span><span style="color: #ffe4b5;">', executes the body, then `</span><span style="color: #a2cd5a;">message</span><span style="color: #ffe4b5;">' the saved message to the echo area. Any `</span><span style="color: #a2cd5a;">message</span><span style="color: #ffe4b5;">' calls within the body will likely not be seen."</span>
  (<span style="color: #00bfff;">declare</span> (debug t) (indent 0))
  `(<span style="color: #00bfff;">let</span> ((msg (current-message)))
     (<span style="color: #00bfff;">progn</span> ,@body)
     (message msg)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--file-lines-to-string</span> (file)
  (<span style="color: #00bfff;">with-temp-buffer</span>
    (insert-file-contents file)
    (buffer-string)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--file-lines-to-list</span> (file)
  (split-string (jw--file-lines-to-string file) <span style="color: #deb887;">"\n"</span> t))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--write-to-file</span> (string file <span style="color: #98f5ff;">&amp;optional</span> append)
  (<span style="color: #00bfff;">jw--save-current-message</span>
    (<span style="color: #00bfff;">let</span> ((file-dir (file-name-directory file)))
      (<span style="color: #00bfff;">unless</span> (file-exists-p file-dir) (make-directory file-dir t))
      (<span style="color: #00bfff;">when</span> (<span style="color: #00bfff;">and</span> (file-exists-p file) (not append)) (delete-file file))
      (append-to-file string nil file))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--substr-first-n</span> (string n)
  (<span style="color: #00bfff;">if</span> (&gt; (length string) n) (substring string 0 n) string))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--make-uuid</span> ()
  (downcase (shell-command-to-string <span style="color: #deb887;">"uuidgen | tr -d '\n'"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--pwd</span> ()
  (file-truename default-directory))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--vc-root-dir</span> ()
  (<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">vc</span>)
  (<span style="color: #00bfff;">let</span> ((vc-root-dir (<span style="color: #00bfff;">ignore-errors</span> (vc-call-backend (vc-responsible-backend (jw--pwd)) 'root (jw--pwd)))))
    (<span style="color: #00bfff;">if</span> vc-root-dir (file-truename vc-root-dir) nil)))

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">jw--git-root-dir</span> 'jw--vc-root-dir)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--iso-current-time-string</span> ()
  (concat (format-time-string <span style="color: #deb887;">"%Y-%m-%dT%T"</span>)
          ((<span style="color: #00bfff;">lambda</span> (x) (concat (substring x 0 3) <span style="color: #deb887;">":"</span> (substring x 3 5))) (format-time-string <span style="color: #deb887;">"%z"</span>))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--run-cmd</span> (command <span style="color: #98f5ff;">&amp;optional</span> process-name before-process-creation after-process-creation)
  <span style="color: #ffe4b5;">"A wrapper around `</span><span style="color: #a2cd5a;">make-comint-in-buffer</span><span style="color: #ffe4b5;">'.</span>
<span style="color: #ffe4b5;">For commands that have already finished, this will clean up the process buffer and re-run the command.</span>
<span style="color: #ffe4b5;">For long running processes, this will always toggle back and forth between the process buffer and the other buffer as long as the process is alive."</span>
  (<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">comint</span>)
  (<span style="color: #00bfff;">let*</span> ((prepared-cmd (string-trim command))
         (cmd-process-name (<span style="color: #00bfff;">or</span> process-name (replace-regexp-in-string <span style="color: #deb887;">"[ \t\n\r]+"</span> <span style="color: #deb887;">" "</span> (jw--substr-first-n prepared-cmd 100))))
         (cmd-buffer-name (format <span style="color: #deb887;">"*%s*"</span> cmd-process-name)))
    (<span style="color: #00bfff;">if</span> (string= <span style="color: #deb887;">""</span> prepared-cmd)
        (message <span style="color: #deb887;">"Empty command! Doing nothing."</span>)
      (<span style="color: #00bfff;">if</span> (process-live-p (get-process cmd-process-name))
          (<span style="color: #00bfff;">if</span> (string= (buffer-name) cmd-buffer-name) (switch-to-buffer (other-buffer)) (switch-to-buffer cmd-buffer-name))
        (<span style="color: #00bfff;">let*</span> ((tmp-script-dir <span style="color: #deb887;">"/tmp/emacs-jw-run-cmd/"</span>)
               (tmp-script-rel-filename (replace-regexp-in-string <span style="color: #deb887;">"[</span><span style="color: #00bfff;">^</span><span style="color: #deb887;">a-zA-Z0-9]+"</span> <span style="color: #deb887;">"-"</span> cmd-process-name))
               (tmp-script-abs-filename (concat tmp-script-dir tmp-script-rel-filename))
               (tmp-script-contents (format <span style="color: #deb887;">"#!%s\n\ncd %s\n\n%s"</span> (executable-find (jw--login-shell)) (jw--pwd) prepared-cmd)))
          (<span style="color: #00bfff;">when</span> (get-buffer cmd-buffer-name) (kill-buffer cmd-buffer-name))
          (jw--write-to-file tmp-script-contents tmp-script-abs-filename)
          (<span style="color: #00bfff;">unless</span> (file-executable-p tmp-script-abs-filename) (chmod tmp-script-abs-filename #o744))
          (<span style="color: #00bfff;">let</span> ((process-buffer (get-buffer-create cmd-buffer-name)))
            (<span style="color: #00bfff;">when</span> before-process-creation (funcall before-process-creation))
            (apply 'make-comint-in-buffer cmd-process-name process-buffer tmp-script-abs-filename nil nil)
            (<span style="color: #00bfff;">when</span> after-process-creation (funcall after-process-creation))
            (switch-to-buffer process-buffer)))))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw--run-cmd-tmux</span> (command tmux-session)
  <span style="color: #ffe4b5;">"Create session `</span><span style="color: #a2cd5a;">tmux-session</span><span style="color: #ffe4b5;">' if needed, and send `</span><span style="color: #a2cd5a;">command</span><span style="color: #ffe4b5;">' to it."</span>
  (call-process <span style="color: #deb887;">"tmux"</span> nil nil nil <span style="color: #deb887;">"new-session"</span> <span style="color: #deb887;">"-d"</span> <span style="color: #deb887;">"-s"</span> tmux-session) <span style="color: #969896;">;; </span><span style="color: #969896;">this does nothing if the session already exists</span>
  (call-process <span style="color: #deb887;">"tmux"</span> nil nil nil <span style="color: #deb887;">"send-keys"</span> <span style="color: #deb887;">"-t"</span> tmux-session command <span style="color: #deb887;">"C-m"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4ac9693" class="outline-2">
<h2 id="org4ac9693"><span class="section-number-2">3</span> customization</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-org0898458" class="outline-3">
<h3 id="org0898458"><span class="section-number-3">3.1</span> env</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">eshell</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">jw-env-set</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">let*</span> ((cmd (format <span style="color: #deb887;">"%s -l -i -c env"</span> (jw--login-shell)))
         (env-big-str (shell-command-to-string cmd))
         (lines (split-string env-big-str <span style="color: #deb887;">"\n"</span>)))
    (<span style="color: #00bfff;">dolist</span> (line lines)
      (<span style="color: #00bfff;">unless</span> (= 0 (length line))
        (<span style="color: #00bfff;">let*</span> ((tokens (split-string line <span style="color: #deb887;">"="</span>))
               (name (car tokens))
               (value (mapconcat 'identity (cdr tokens) <span style="color: #deb887;">"="</span>)))
          (setenv name value)
          (<span style="color: #00bfff;">when</span> (string= name <span style="color: #deb887;">"PATH"</span>)
            (<span style="color: #00bfff;">setq</span> exec-path (split-string value <span style="color: #deb887;">":"</span>))
            (<span style="color: #00bfff;">setq</span> eshell-path-env value))))))
  (setenv <span style="color: #deb887;">"EDITOR"</span> <span style="color: #deb887;">"emacsclient"</span>))

(jw-env-set)
(add-to-list 'eshell-mode-hook 'jw-env-set)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0e9521" class="outline-3">
<h3 id="orgb0e9521"><span class="section-number-3">3.2</span> style</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(tool-bar-mode -1)
(menu-bar-mode -1)
(scroll-bar-mode -1)

(load-theme 'afternoon t)
(set-cursor-color <span style="color: #deb887;">"dark grey"</span>)
(set-background-color <span style="color: #deb887;">"black"</span>)
(set-face-background 'fringe nil)

(jw--set-font-size <span style="color: #deb887;">"14"</span>)

(set-face-attribute 'mode-line nil <span style="color: #f08080;">:font</span> (jw--font-name <span style="color: #deb887;">"14"</span>) <span style="color: #f08080;">:background</span> jw--mode-line-color <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#7db5d6"</span> <span style="color: #f08080;">:box</span> '(<span style="color: #f08080;">:style</span> released-button))
(set-face-attribute 'mode-line-inactive nil <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"#263238"</span> <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"gray"</span> <span style="color: #f08080;">:box</span> '(<span style="color: #f08080;">:style</span> released-button))
(set-face-attribute 'mode-line-buffer-id nil <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"white"</span>)
(set-face-attribute 'mode-line-highlight nil <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#7db5d6"</span>)
(set-face-attribute 'header-line nil <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"#005858"</span> <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"white"</span>)

(<span style="color: #00bfff;">setq-default</span> mode-line-format '(<span style="color: #deb887;">" &#10004; "</span> mode-line-buffer-identification <span style="color: #deb887;">" "</span> mode-line-misc-info))

(<span style="color: #00bfff;">setq</span> inhibit-startup-message t
      initial-scratch-message <span style="color: #deb887;">""</span>
      initial-major-mode 'org-mode)

(add-hook 'minibuffer-setup-hook '(lambda ()
                                    (set (make-local-variable 'face-remapping-alist) '((default <span style="color: #f08080;">:height</span> 1.3)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf21a174" class="outline-3">
<h3 id="orgf21a174"><span class="section-number-3">3.3</span> settings</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">setq</span> custom-file (concat user-emacs-directory <span style="color: #deb887;">"custom.el"</span>))
(load custom-file 'noerror)

(ansi-color-for-comint-mode-on)

(fset 'yes-or-no-p 'y-or-n-p)

(<span style="color: #00bfff;">setq</span> create-lockfiles nil)

(<span style="color: #00bfff;">setq</span> save-silently t)

(<span style="color: #00bfff;">setq</span> suggest-key-bindings nil)

(<span style="color: #00bfff;">setq</span> kill-whole-line t)

(global-auto-revert-mode 1)

(<span style="color: #00bfff;">setq</span> global-auto-revert-non-file-buffers t
      auto-revert-verbose nil)

(<span style="color: #00bfff;">setq-default</span> indent-tabs-mode nil)

(<span style="color: #00bfff;">setq</span> tab-width 2)

(delete-selection-mode t)

(winner-mode t)

(global-subword-mode t)

(<span style="color: #00bfff;">setq</span> default-major-mode 'text-mode)

(put 'dired-find-alternate-file 'disabled nil)

(<span style="color: #00bfff;">setq</span> wdired-allow-to-change-permissions 'advanced)

(<span style="color: #00bfff;">setq</span> dired-listing-switches <span style="color: #deb887;">"-alh"</span>)

(add-hook 'after-save-hook 'executable-make-buffer-file-executable-if-script-p)

(add-hook 'before-save-hook 'delete-trailing-whitespace)

(add-hook 'next-error-hook 'delete-other-windows)

(<span style="color: #00bfff;">setq</span> uniquify-buffer-name-style 'forward)

(<span style="color: #00bfff;">setq</span> ring-bell-function 'ignore)

(<span style="color: #00bfff;">setq</span> enable-recursive-minibuffers t)

(add-to-list 'auto-mode-alist '(<span style="color: #deb887;">"\\.scss$"</span> . css-mode))

(<span style="color: #00bfff;">when</span> (executable-find <span style="color: #deb887;">"pry"</span>) (<span style="color: #00bfff;">setq</span> inf-ruby-default-implementation <span style="color: #deb887;">"pry"</span>))

(add-hook 'text-mode-hook 'flyspell-mode)

(add-hook 'prog-mode-hook 'hs-minor-mode)

(<span style="color: #00bfff;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)

(put 'narrow-to-region 'disabled nil)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">shell-command--advice--ignore-message-with-no-output</span> (<span style="color: #98f5ff;">&amp;rest</span> args)
  (<span style="color: #00bfff;">when</span> (string-match <span style="color: #deb887;">"Shell command succeeded with no output"</span> (current-message)) (message nil)))
(advice-add 'shell-command-on-region <span style="color: #f08080;">:after</span> 'shell-command--advice--ignore-message-with-no-output)

(<span style="color: #00bfff;">setq</span> user-auto-save-directory (concat user-emacs-directory <span style="color: #deb887;">"auto-saves/"</span>))
(<span style="color: #00bfff;">unless</span> (file-exists-p user-auto-save-directory) (make-directory user-auto-save-directory)) <span style="color: #969896;">;; </span><span style="color: #969896;">auto-save won't create directories</span>
(<span style="color: #00bfff;">setq</span> auto-save-file-name-transforms `((<span style="color: #deb887;">".*"</span> ,user-auto-save-directory t)))

(<span style="color: #00bfff;">setq</span> undo-tree-auto-save-history t)

(add-to-list 'undo-tree-history-directory-alist `(<span style="color: #deb887;">""</span> . ,(concat user-emacs-directory <span style="color: #deb887;">"undo-tree"</span>)))

(<span style="color: #00bfff;">setq</span> user-backup-directory (concat user-emacs-directory <span style="color: #deb887;">"backups/"</span>))
(<span style="color: #00bfff;">unless</span> (file-exists-p user-backup-directory) (make-directory user-backup-directory))

(<span style="color: #00bfff;">setq</span> version-control t
      vc-make-backup-files t
      kept-new-versions 10
      kept-old-versions 0
      backup-by-copying t <span style="color: #969896;">;; </span><span style="color: #969896;">deep copy of symlinks</span>
      delete-old-versions t)

(<span style="color: #00bfff;">setq</span> backup-directory-alist `((<span style="color: #deb887;">"."</span> . ,user-backup-directory)))

(<span style="color: #00bfff;">when</span> (eq system-type 'gnu/linux)
  (<span style="color: #00bfff;">setq</span> interprogram-paste-function 'x-cut-buffer-or-selection-value
        browse-url-browser-function 'browse-url-generic
        browse-url-generic-program <span style="color: #deb887;">"google-chrome"</span>
        ack-executable <span style="color: #deb887;">"ack-grep"</span>))

(<span style="color: #00bfff;">when</span> (eq system-type 'darwin)
  (<span style="color: #00bfff;">setq</span> ns-command-modifier 'meta
        interprogram-paste-function 'x-selection-value
        browse-url-browser-function 'browse-url-default-macosx-browser
        ispell-program-name <span style="color: #deb887;">"aspell"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4079399" class="outline-3">
<h3 id="org4079399"><span class="section-number-3">3.4</span> functions</h3>
<div class="outline-text-3" id="text-3-4">
</div><div id="outline-container-orgbd4b98f" class="outline-4">
<h4 id="orgbd4b98f"><span class="section-number-4">3.4.1</span> common</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">filter-lines</span> 'keep-lines)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">filter-out-lines</span> 'flush-lines)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">elisp-shell</span> 'ielm)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">font-size-big</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (jw--set-font-size <span style="color: #deb887;">"18"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">font-size-normal</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (jw--set-font-size <span style="color: #deb887;">"14"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">kill-region-or-line</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (region-active-p)
      (kill-region (mark) (point))
    (<span style="color: #00bfff;">progn</span> (beginning-of-line) (kill-line))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">kill-ring-save-region-or-line</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (region-active-p)
      (kill-ring-save (mark) (point))
    (kill-ring-save (line-beginning-position) (line-end-position))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">date</span> (<span style="color: #98f5ff;">&amp;optional</span> arg)
<span style="color: #ffe4b5;">"Display date.</span>
<span style="color: #ffe4b5;">With default prefix arg (e.g. C-u M-x date), display calendar around current date.</span>
<span style="color: #ffe4b5;">With prefix arg of 4 (e.g. C-u 4 M-x date), prompt for year/month for calendar display."</span>
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> arg
      (calendar (<span style="color: #00bfff;">if</span> (equal arg 4) arg nil))
    (message (current-time-string))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">iso-date</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (message (jw--iso-current-time-string)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">insert-iso-date</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (insert (jw--iso-current-time-string)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">weather</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (cmd <span style="color: #deb887;">"weather"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">scratch-buffer</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">let</span> ((scratch-buffer (get-buffer-create <span style="color: #deb887;">"*scratch*"</span>)))
    (switch-to-buffer scratch-buffer)
    (org-mode)))

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">notepad</span> 'scratch-buffer)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">toggle-scratch-buffer</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (string= (buffer-name) <span style="color: #deb887;">"*scratch*"</span>)
      (switch-to-buffer (other-buffer))
    (scratch-buffer)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">ping-google</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (ping <span style="color: #deb887;">"google.com"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">uuid</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (insert (jw--make-uuid)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">json-prettify</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (region-active-p)
      (json-pretty-print (region-beginning) (region-end))
    (json-pretty-print-buffer)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">cmd</span> (command)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"sCommand: "</span>)
  (jw--run-cmd command))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">cmd-tmux</span> (command <span style="color: #98f5ff;">&amp;optional</span> tmux-session)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"sCommand: "</span>)
  (<span style="color: #00bfff;">let</span> ((ts (<span style="color: #00bfff;">or</span> tmux-session <span style="color: #deb887;">"emacs"</span>)))
    (jw--run-cmd-tmux command ts)
    (message <span style="color: #deb887;">"Sent to tmux session: %s"</span> ts)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">cmd-dwim</span> (arg <span style="color: #98f5ff;">&amp;optional</span> command)
  <span style="color: #ffe4b5;">"Shell command dwim.</span>

<span style="color: #ffe4b5;">M-x `</span><span style="color: #a2cd5a;">cmd-dwim</span><span style="color: #ffe4b5;">' will run an async shell command in a new buffer.</span>
<span style="color: #ffe4b5;">C-u M-x `</span><span style="color: #a2cd5a;">cmd-dwim</span><span style="color: #ffe4b5;">' will run a shell command and print the response in the echo area.</span>
<span style="color: #ffe4b5;">C-u 4 M-x `</span><span style="color: #a2cd5a;">cmd-dwim</span><span style="color: #ffe4b5;">' will run a shell command and insert the response at point.</span>
<span style="color: #ffe4b5;">C-u 8 M-x `</span><span style="color: #a2cd5a;">cmd-dwim</span><span style="color: #ffe4b5;">' will send a shell command to the default tmux session using `</span><span style="color: #a2cd5a;">cmd-tmux</span><span style="color: #ffe4b5;">'.</span>

<span style="color: #ffe4b5;">Interactively, if a region is selected, the region will be used as the shell command.</span>
<span style="color: #ffe4b5;">Otherwise, the shell command is read from prompt."</span>
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">let</span> ((prepared-cmd (<span style="color: #00bfff;">or</span> command (<span style="color: #00bfff;">if</span> (region-active-p)
                                      (buffer-substring-no-properties (region-beginning) (region-end))
                                    (read-shell-command <span style="color: #deb887;">"Command: "</span>)))))
    (<span style="color: #00bfff;">if</span> arg
        (<span style="color: #00bfff;">case</span> arg
          (4 (insert (shell-command-to-string prepared-cmd)))
          (8 (cmd-tmux prepared-cmd))
          (t (message (string-trim (shell-command-to-string prepared-cmd)))))
      (cmd prepared-cmd))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">toggle-window-split</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (= (count-windows) 2)
      (<span style="color: #00bfff;">let*</span> ((this-win-buffer (window-buffer))
             (next-win-buffer (window-buffer (next-window)))
             (this-win-edges (window-edges (selected-window)))
             (next-win-edges (window-edges (next-window)))
             (this-win-2nd (not (<span style="color: #00bfff;">and</span> (&lt;= (car this-win-edges)
                                         (car next-win-edges))
                                     (&lt;= (cadr this-win-edges)
                                         (cadr next-win-edges)))))
             (splitter
              (<span style="color: #00bfff;">if</span> (= (car this-win-edges)
                     (car (window-edges (next-window))))
                  'split-window-horizontally
                'split-window-vertically)))
        (delete-other-windows)
        (<span style="color: #00bfff;">let</span> ((first-win (selected-window)))
          (funcall splitter)
          (<span style="color: #00bfff;">if</span> this-win-2nd (other-window 1))
          (set-window-buffer (selected-window) this-win-buffer)
          (set-window-buffer (next-window) next-win-buffer)
          (select-window first-win)
          (<span style="color: #00bfff;">if</span> this-win-2nd (other-window 1))))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">beginning-of-line-or-indentation</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">let</span> ((previous-point (point)))
    (back-to-indentation)
    (<span style="color: #00bfff;">if</span> (equal previous-point (point))
        (beginning-of-line))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">comment-dwim-dwim</span> (<span style="color: #98f5ff;">&amp;optional</span> arg)
  <span style="color: #ffe4b5;">"When the region is active, then toggle comments over it. Otherwise, toggle commenting the current line. If there is a prefix arg, then append a comment to the end of the line instead. If the prefix arg is 4, then kill the comment on the current line."</span>
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"*P"</span>)
  (<span style="color: #00bfff;">if</span> (region-active-p)
      (comment-dwim arg)
    (<span style="color: #00bfff;">if</span> arg
        (<span style="color: #00bfff;">if</span> (equal arg 4)
            (<span style="color: #00bfff;">save-excursion</span> (comment-dwim arg))
          (comment-dwim nil))
      (comment-or-uncomment-region (line-beginning-position) (line-end-position)))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">open-line-next</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (end-of-line)
  (open-line 1)
  (next-line 1)
  (indent-according-to-mode))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">open-line-previous</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (beginning-of-line)
  (open-line 1)
  (indent-according-to-mode))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">newline-and-open-line-previous</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (newline-and-indent)
  (open-line-previous))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">kill-matching-buffers-silently</span> (pattern)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"sKill buffers matching: "</span>)
  (<span style="color: #00bfff;">dolist</span> (buffer (buffer-list))
    (<span style="color: #00bfff;">when</span> (string-match pattern (buffer-name buffer))
      (kill-buffer buffer))))

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">toggle-fullscreen</span> 'toggle-frame-fullscreen)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">fullscreen</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">unless</span> (frame-parameter (selected-frame) 'fullscreen)
    (toggle-frame-fullscreen)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">fullscreen-off</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">when</span> (frame-parameter (selected-frame) 'fullscreen)
    (toggle-frame-fullscreen)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">unbind-variable</span> (name)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"SVariable name: "</span>)
  (makunbound name))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">unbind-function</span> (name)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"SFunction name: "</span>)
  (fmakunbound name))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5166f5" class="outline-4">
<h4 id="orge5166f5"><span class="section-number-4">3.4.2</span> contact</h4>
<div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">config-insert-author</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (insert jw-config-author-name))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">config-goto-homepage</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (browse-url jw-config-author-url))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">config-goto-github</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (browse-url jw-config-github-url))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cd6498" class="outline-4">
<h4 id="org1cd6498"><span class="section-number-4">3.4.3</span> emacs</h4>
<div class="outline-text-4" id="text-3-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-config</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (find-file (concat user-emacs-directory <span style="color: #deb887;">"emacs.org"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-private-config</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (find-file (concat user-emacs-directory <span style="color: #deb887;">"private.org"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-configs-toggle</span> (arg)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> arg
      (<span style="color: #00bfff;">if</span> (string= (buffer-name) <span style="color: #deb887;">"private.org"</span>) (switch-to-buffer (other-buffer)) (emacs-private-config))
    (<span style="color: #00bfff;">if</span> (string= (buffer-name) <span style="color: #deb887;">"emacs.org"</span>) (switch-to-buffer (other-buffer)) (emacs-config))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-reload-config</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (load-file (concat user-emacs-directory <span style="color: #deb887;">"init.el"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-archive-packages-and-reload-config</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (emacs-archive-packages)
  (emacs-reload-config))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-archive-packages-and-die</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (emacs-archive-packages)
  (save-buffers-kill-terminal))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-archive-packages</span> ()
  (<span style="color: #00bfff;">when</span> (file-exists-p package-user-dir)
    (<span style="color: #00bfff;">let</span> ((archive-dir (format <span style="color: #deb887;">"/tmp/emacs-elpa--%s"</span> (jw--iso-current-time-string))))
      (copy-directory package-user-dir archive-dir)
      (delete-directory package-user-dir t))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">emacs-config-export-to-index-html</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">jw--save-current-message</span>
    (<span style="color: #00bfff;">save-window-excursion</span>
      (emacs-config)
      (<span style="color: #00bfff;">when</span> (file-exists-p <span style="color: #deb887;">"emacs.html"</span>) (delete-file <span style="color: #deb887;">"emacs.html"</span>))
      (org-html-export-to-html nil)
      (rename-file <span style="color: #deb887;">"emacs.html"</span> <span style="color: #deb887;">"index.html"</span> t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba83bcd" class="outline-4">
<h4 id="orgba83bcd"><span class="section-number-4">3.4.4</span> random</h4>
<div class="outline-text-4" id="text-3-4-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">exercism-fetch-all</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (shell-command <span style="color: #deb887;">"exercism fetch"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">exercism-submit-this-file</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (shell-command (format <span style="color: #deb887;">"exercism submit %s"</span> (buffer-file-name))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1792a19" class="outline-3">
<h3 id="org1792a19"><span class="section-number-3">3.5</span> key bindings</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-unset-key (kbd <span style="color: #deb887;">"C-z"</span>))
(global-unset-key (kbd <span style="color: #deb887;">"C-x C-z"</span>))

(global-set-key (kbd <span style="color: #deb887;">"M-!"</span>) 'cmd-dwim)
(global-set-key (kbd <span style="color: #deb887;">"M-&amp;"</span>) 'cmd-dwim)

(global-set-key (kbd <span style="color: #deb887;">"C-s"</span>) 'isearch-forward-regexp)
(global-set-key (kbd <span style="color: #deb887;">"C-r"</span>) 'isearch-backward-regexp)

(global-set-key (kbd <span style="color: #deb887;">"C-M-g"</span>) 'goto-line)

(global-set-key (kbd <span style="color: #deb887;">"C-M-9"</span>) 'winner-undo)
(global-set-key (kbd <span style="color: #deb887;">"C-M-0"</span>) 'winner-redo)

(global-set-key (kbd <span style="color: #deb887;">"C-x 9"</span>) 'toggle-window-split)
(global-set-key (kbd <span style="color: #deb887;">"C-x p f"</span>) 'pop-to-buffer)

(global-set-key (kbd <span style="color: #deb887;">"C-w"</span>) 'kill-region-or-line)
(global-set-key (kbd <span style="color: #deb887;">"M-w"</span>) 'kill-ring-save-region-or-line)

(global-set-key (kbd <span style="color: #deb887;">"C-a"</span>) 'beginning-of-line-or-indentation)
(global-set-key (kbd <span style="color: #deb887;">"C-o"</span>) 'open-line-previous)
(global-set-key (kbd <span style="color: #deb887;">"C-j"</span>) 'newline-and-open-line-previous)

(global-set-key (kbd <span style="color: #deb887;">"M-;"</span>) 'comment-dwim-dwim)

(global-set-key (kbd <span style="color: #deb887;">"C-c M-t"</span>) 'transpose-lines)
</pre>
</div>

<p>
hijack <code>C-x m</code> as prefix key for personal bindings
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">setq</span> jw-keymap (make-sparse-keymap))

(global-set-key (kbd <span style="color: #deb887;">"C-x m"</span>) jw-keymap)
(global-set-key (kbd <span style="color: #deb887;">"C-c m"</span>) jw-keymap)

(define-key jw-keymap <span style="color: #deb887;">"!"</span> 'cmd-dwim)

(define-key jw-keymap <span style="color: #deb887;">"q"</span> 'emacs-configs-toggle)

(define-key jw-keymap <span style="color: #deb887;">"d"</span> 'date)
(define-key jw-keymap <span style="color: #deb887;">"w"</span> 'weather)

(define-key jw-keymap [return] 'toggle-frame-fullscreen)

(define-key jw-keymap <span style="color: #deb887;">"i"</span> 'toggle-scratch-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ea6d24" class="outline-3">
<h3 id="org3ea6d24"><span class="section-number-3">3.6</span> eshell</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">em-alias</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">eshell-dwim</span> ()
  <span style="color: #ffe4b5;">"Toggle eshell. If in a version control repository, then cd to the root of the repository."</span>
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (eq major-mode 'eshell-mode)
      (switch-to-buffer (other-buffer))
    (<span style="color: #00bfff;">let</span> ((d (<span style="color: #00bfff;">or</span> (jw--vc-root-dir) (jw--pwd))))
      (eshell)
      (eshell-kill-input)
      (goto-char (point-max))
      (<span style="color: #00bfff;">unless</span> (string= d (jw--pwd))
        (insert (format <span style="color: #deb887;">"cd '%s'"</span> d))
        (eshell-send-input)))))

(define-key jw-keymap <span style="color: #deb887;">"e"</span> 'eshell-dwim)

(custom-set-faces '(eshell-prompt ((nil (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#d68f7d"</span>)))))

(eshell/alias <span style="color: #deb887;">"d"</span> <span style="color: #deb887;">"dired $1"</span>)
(eshell/alias <span style="color: #deb887;">"e"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">"emacs"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">"vi"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">"vim"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">"less"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">"cat"</span> <span style="color: #deb887;">"find-file $1"</span>)
(eshell/alias <span style="color: #deb887;">":q"</span> <span style="color: #deb887;">"exit"</span>)
(eshell/alias <span style="color: #deb887;">":Q"</span> <span style="color: #deb887;">"exit"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org742583f" class="outline-3">
<h3 id="org742583f"><span class="section-number-3">3.7</span> rcirc</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">rcirc</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">rcirc-connect-dwim</span> (<span style="color: #98f5ff;">&amp;optional</span> server port nick user-name full-name startup-channels password encryption)
  <span style="color: #ffe4b5;">"Alternative to `</span><span style="color: #a2cd5a;">rcirc-connect</span><span style="color: #ffe4b5;">'.</span>
<span style="color: #ffe4b5;">If the server is not connected, then connect to it.</span>
<span style="color: #ffe4b5;">If no server is provided, then a prompt will ask the user for a server.</span>
<span style="color: #ffe4b5;">If the server is connected, then toggle to it's process buffer.</span>
<span style="color: #ffe4b5;">If the server is connected and a prefix arg is provided, then invoke a quick /msg on the server and toggle back to the other-buffer."</span>
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> server
      (<span style="color: #00bfff;">let</span> ((existing-sp (get-process server)))
        (<span style="color: #00bfff;">if</span> (process-live-p existing-sp)
            (<span style="color: #00bfff;">if</span> current-prefix-arg
                (<span style="color: #00bfff;">save-window-excursion</span>
                  (switch-to-buffer (process-buffer existing-sp))
                  (call-interactively 'rcirc-cmd-msg))
              (switch-to-buffer (process-buffer existing-sp)))
          (rcirc-connect server port nick user-name full-name startup-channels password encryption)))
    (rcirc t)))

(<span style="color: #00bfff;">setq</span> rcirc-buffer-maximum-lines 2000)

(add-to-list 'rcirc-omit-responses <span style="color: #deb887;">"MODE"</span>)

(custom-set-faces '(rcirc-my-nick ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00ffff"</span>))))
                  '(rcirc-other-nick ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#90ee90"</span>))))
                  '(rcirc-server ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#a2b5cd"</span>))))
                  '(rcirc-server-prefix ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00bfff"</span>))))
                  '(rcirc-timestamp ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#7d7d7d"</span>))))
                  '(rcirc-nick-in-message ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00ffff"</span>))))
                  '(rcirc-prompt ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00bfff"</span>))))
                  '(rcirc-keyword ((t <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00ffff"</span>)))
                  '(rcirc-nick-in-message-full-line ((t ())))
                  '(rcirc-track-nick ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00ffff"</span>))))
                  '(rcirc-track-keyword ((t (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#00ffff"</span>)))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">rcirc-hook--initial-config</span> ()
  (<span style="color: #00bfff;">jw--save-current-message</span>
    (turn-on-flyspell)
    (rcirc-track-minor-mode t)
    (rcirc-omit-mode)
    (cd (getenv <span style="color: #deb887;">"HOME"</span>))))

(add-hook 'rcirc-mode-hook 'rcirc-hook--initial-config)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">rcirc-hook--span-window-width</span> ()
  (<span style="color: #00bfff;">setq</span> rcirc-fill-column (- (window-width) 2)))

(add-hook 'window-configuration-change-hook 'rcirc-hook--span-window-width)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">rcirc-handler-NOTICE--advice--ignore-KEEPALIVE</span> (original-function <span style="color: #98f5ff;">&amp;rest</span> args)
  (<span style="color: #00bfff;">let*</span> ((function-args (nth 2 args))
         (msg (cadr function-args)))
    (<span style="color: #00bfff;">unless</span> (string-match <span style="color: #deb887;">"keepalive"</span> msg)
      (apply original-function args))))

(advice-add 'rcirc-handler-NOTICE <span style="color: #f08080;">:around</span> 'rcirc-handler-NOTICE--advice--ignore-KEEPALIVE)
</pre>
</div>

<p>
here are some useful rcirc configs to set in in the safe <code>private</code> location
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">setq</span> rcirc-default-nick <span style="color: #deb887;">"nick"</span>
      rcirc-default-user-name <span style="color: #deb887;">"username"</span>
      rcirc-default-full-name <span style="color: #deb887;">"full name"</span>
      rcirc-keywords '(<span style="color: #deb887;">"nick1"</span> <span style="color: #deb887;">"nick2"</span>)
      rcirc-server-alist '((<span style="color: #deb887;">"irc.freenode.net"</span>
                            <span style="color: #f08080;">:port</span> 6697
                            <span style="color: #f08080;">:encryption</span> tls
                            <span style="color: #f08080;">:user-name</span> <span style="color: #deb887;">"freenode username"</span>
                            <span style="color: #f08080;">:password</span> <span style="color: #deb887;">"free node pass"</span>
                            <span style="color: #f08080;">:channels</span> (<span style="color: #deb887;">"##doctorwho"</span>))))
</pre>
</div>

<p>
example of defining specific functions to connect to various irc servers
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">freenode-irc-connect</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (rcirc-connect-dwim <span style="color: #deb887;">"irc.freenode.net"</span> 6697 <span style="color: #deb887;">"nick"</span> <span style="color: #deb887;">"username"</span> <span style="color: #deb887;">"full name"</span> '(<span style="color: #deb887;">"##doctorwho"</span> <span style="color: #deb887;">"#emacs"</span>) <span style="color: #deb887;">"your password"</span> 'tls)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">twitch-irc-connect</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (rcirc-connect-dwim <span style="color: #deb887;">"irc.chat.twitch.tv"</span> 6667 <span style="color: #deb887;">"nick"</span> <span style="color: #deb887;">"username"</span> <span style="color: #deb887;">"full name"</span> nil <span style="color: #deb887;">"your password"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org674f85c" class="outline-3">
<h3 id="org674f85c"><span class="section-number-3">3.8</span> helm</h3>
<div class="outline-text-3" id="text-3-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">helm</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">helm-config</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">helm-dabbrev</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">helm-swoop</span>)

(<span style="color: #00bfff;">setq</span> helm-split-window-in-side-p t
      helm-ff-search-library-in-sexp t
      helm-scroll-amount 8
      helm-buffer-max-length nil
      helm-ff-file-name-history-use-recentf t
      helm-quick-update t
      helm-move-to-line-cycle-in-source nil)

(<span style="color: #00bfff;">setq</span> helm-buffers-fuzzy-matching t
      helm-M-x-fuzzy-match t
      helm-recentf-fuzzy-match t
      helm-semantic-fuzzy-match t
      helm-imenu-fuzzy-match t
      helm-locate-fuzzy-match t)

(<span style="color: #00bfff;">when</span> (executable-find <span style="color: #deb887;">"pt"</span>) (<span style="color: #00bfff;">setq</span> helm-ag-base-command <span style="color: #deb887;">"pt -i -e --nocolor --nogroup"</span>))

(<span style="color: #00bfff;">setq</span> helm-ag-insert-at-point 'symbol)

(<span style="color: #00bfff;">setq</span> projectile-completion-system 'helm
      projectile-mode-line <span style="color: #deb887;">""</span>) <span style="color: #969896;">;; </span><span style="color: #969896;">this slowed tramp down sometimes</span>

(global-set-key (kbd <span style="color: #deb887;">"C-c h"</span>) 'helm-command-prefix)
(global-unset-key (kbd <span style="color: #deb887;">"C-x c"</span>))

(define-key helm-command-map (kbd <span style="color: #deb887;">"h"</span>) 'helm-descbinds)
(define-key helm-command-map (kbd <span style="color: #deb887;">"s"</span>) 'helm-google-suggest) <span style="color: #969896;">;; </span><span style="color: #969896;">originally helm-surfraw</span>

(global-set-key (kbd <span style="color: #deb887;">"M-:"</span>) 'helm-eval-expression-with-eldoc)
(global-set-key (kbd <span style="color: #deb887;">"C-x C-b"</span>) 'helm-buffers-list)
(global-set-key (kbd <span style="color: #deb887;">"C-x C-f"</span>) 'helm-find-files)
(global-set-key (kbd <span style="color: #deb887;">"M-x"</span>) 'helm-M-x)
(global-set-key (kbd <span style="color: #deb887;">"M-y"</span>) 'helm-show-kill-ring)
(global-set-key (kbd <span style="color: #deb887;">"M-s C-s"</span>) 'helm-ag)
(global-set-key (kbd <span style="color: #deb887;">"M-s o"</span>) 'helm-occur)
(global-set-key (kbd <span style="color: #deb887;">"M-s s"</span>) 'helm-swoop)
(global-set-key (kbd <span style="color: #deb887;">"M-s i"</span>) 'helm-semantic-or-imenu)
(global-set-key (kbd <span style="color: #deb887;">"M-/"</span>) 'helm-dabbrev)
(global-set-key (kbd <span style="color: #deb887;">"C-h a"</span>) 'helm-apropos)
(global-set-key (kbd <span style="color: #deb887;">"C-M-/"</span>) 'helm-company)
(global-set-key (kbd <span style="color: #deb887;">"C-h b"</span>) 'helm-descbinds)

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">kill-ring-show</span> 'helm-show-kill-ring)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">list-colors-display</span> 'helm-colors)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">proced</span> 'helm-top)

(set-face-attribute 'helm-source-header nil <span style="color: #f08080;">:height</span> 1.0 <span style="color: #f08080;">:weight</span> 'normal <span style="color: #f08080;">:family</span> (jw--font-name) <span style="color: #f08080;">:box</span> '(<span style="color: #f08080;">:style</span> released-button))
(set-face-attribute 'helm-candidate-number nil <span style="color: #f08080;">:background</span> jw--mode-line-color <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"goldenrod"</span>)
(set-face-attribute 'helm-swoop-target-line-face nil <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"goldenrod"</span>)

(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">company</span>)
(custom-set-faces <span style="color: #969896;">;; </span><span style="color: #969896;">give company dropdown helm colors</span>
 `(company-tooltip ((t (<span style="color: #f08080;">:background</span> ,jw--mode-line-color))))
 `(company-scrollbar-bg ((t (<span style="color: #f08080;">:background</span> <span style="color: #deb887;">"black"</span>))))
 `(company-scrollbar-fg ((t (<span style="color: #f08080;">:background</span> <span style="color: #deb887;">"#005858"</span>))))
 `(company-tooltip-selection ((t (<span style="color: #f08080;">:inherit</span> 'helm-selection))))
 `(company-tooltip-common ((t (<span style="color: #f08080;">:inherit</span> 'helm-match))))
 `(company-tooltip-common-selection ((t (<span style="color: #f08080;">:inherit</span> 'helm-match))))
 `(company-tooltip-annotation ((t (<span style="color: #f08080;">:inherit</span> 'helm-bookmark-file))))
 `(company-preview-common ((t <span style="color: #f08080;">:inherit</span> 'company-echo)))
 `(company-echo-common ((t <span style="color: #f08080;">:inherit</span> 'company-echo)))
 `(company-template-field ((t <span style="color: #f08080;">:inherit</span> 'helm-match-item))))

(add-hook 'eshell-mode-hook
          '(lambda ()
             (define-key eshell-mode-map [remap eshell-pcomplete] 'helm-esh-pcomplete)
             (define-key eshell-mode-map (kbd <span style="color: #deb887;">"M-p"</span>) 'helm-eshell-history)))

(add-hook 'projectile-mode-hook
          '(lambda ()
             (<span style="color: #00bfff;">setq</span> projectile-switch-project-action 'helm-projectile)))

(add-hook 'flycheck-mode-hook
          '(lambda ()
             (define-key flycheck-mode-map (kbd <span style="color: #deb887;">"C-c ! l"</span>) 'helm-flycheck)))

(add-hook 'flyspell-mode-hook
          '(lambda ()
             (define-key flyspell-mode-map (kbd <span style="color: #deb887;">"C-M-i"</span>) 'helm-flyspell-correct))) <span style="color: #969896;">;; </span><span style="color: #969896;">also works with M-&lt;tab&gt;</span>

(helm-mode 1)
(helm-autoresize-mode 1)

(projectile-global-mode)
(helm-projectile-on)

(add-to-list 'helm-dabbrev-major-mode-assoc '(scala-mode . sbt-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf93512a" class="outline-3">
<h3 id="orgf93512a"><span class="section-number-3">3.9</span> magit</h3>
<div class="outline-text-3" id="text-3-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">magit</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">magit-gh-pulls</span>)

(global-set-key (kbd <span style="color: #deb887;">"M-g"</span>) 'magit-status)
(global-magit-file-mode t)

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">git-browse-at-remote</span> 'browse-at-remote)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">github-browse-file</span> 'browse-at-remote)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">github-hub-cmd</span> (cmd)
  (<span style="color: #00bfff;">if</span> (executable-find <span style="color: #deb887;">"hub"</span>)
      (shell-command (format <span style="color: #deb887;">"hub %s"</span> cmd))
    (message <span style="color: #deb887;">"Executable \"hub\" required for this command. Check it out at hub.github.com!"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">github-issues</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (github-hub-cmd <span style="color: #deb887;">"browse -- issues"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">github-pulls</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (github-hub-cmd <span style="color: #deb887;">"browse -- pulls"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">github-compare</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (github-hub-cmd <span style="color: #deb887;">"browse -- compare"</span>))

(<span style="color: #00bfff;">magit-define-popup</span> <span style="color: #daa520;">magit-git-extras-popup</span>
  <span style="color: #ffe4b5;">"Popup console for extra git commands."</span>
  'magit-commands
  <span style="color: #f08080;">:actions</span> '(<span style="color: #deb887;">"Actions"</span>
             (?P <span style="color: #deb887;">"Github pulls popup"</span> magit-gh-pulls-popup)
             (?b <span style="color: #deb887;">"Browse at remote"</span> git-browse-at-remote)
             <span style="color: #deb887;">"Browse on Github"</span>
             (?i <span style="color: #deb887;">"Issues"</span> github-issues)
             (?p <span style="color: #deb887;">"Pulls"</span> github-pulls)
             (?c <span style="color: #deb887;">"Compare"</span> github-compare))
  <span style="color: #f08080;">:max-action-columns</span> 1)

(magit-define-popup-action 'magit-dispatch-popup ?&amp; <span style="color: #deb887;">"Extras"</span> 'magit-git-extras-popup)
(define-key magit-mode-map (kbd <span style="color: #deb887;">"&amp;"</span>) 'magit-git-extras-popup)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6fa64d" class="outline-3">
<h3 id="orge6fa64d"><span class="section-number-3">3.10</span> org</h3>
<div class="outline-text-3" id="text-3-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">org-pomodoro</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">todo</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (boundp 'jw-org-todo-file)
      (<span style="color: #00bfff;">if</span> (string= (buffer-name) (file-name-nondirectory jw-org-todo-file))
          (switch-to-buffer (other-buffer))
        (<span style="color: #00bfff;">progn</span> (find-file jw-org-todo-file)
               (cd (getenv <span style="color: #deb887;">"HOME"</span>))))
    (message <span style="color: #deb887;">"Please set `</span><span style="color: #a2cd5a;">jw-org-todo-file</span><span style="color: #deb887;">' to your todo org file location!"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org-feed-update-all-or-one</span> (arg)
  <span style="color: #ffe4b5;">"When called with a prefix argument, interactively call `</span><span style="color: #a2cd5a;">org-feed-update</span><span style="color: #ffe4b5;">'. Otherwise call `</span><span style="color: #a2cd5a;">org-feed-update-all</span><span style="color: #ffe4b5;">'."</span>
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> arg
      (call-interactively 'org-feed-update)
    (org-feed-update-all)))

(define-key jw-keymap <span style="color: #deb887;">"o"</span> 'todo)
(define-key jw-keymap <span style="color: #deb887;">"a"</span> 'org-agenda)
(define-key jw-keymap <span style="color: #deb887;">"c"</span> 'org-capture)
(define-key jw-keymap [tab] 'org-pomodoro)

(add-hook 'org-mode-hook '(lambda ()
                            (text-scale-set 2)
                            (local-set-key (kbd <span style="color: #deb887;">"C-c &lt;"</span>) 'org-time-stamp)
                            (local-set-key (kbd <span style="color: #deb887;">"C-c ."</span>) 'org-time-stamp-inactive)
                            (local-set-key [remap org-feed-update-all] 'org-feed-update-all-or-one))) <span style="color: #969896;">;; </span><span style="color: #969896;">C-c C-x g</span>

(add-to-list 'org-structure-template-alist '(<span style="color: #deb887;">"n"</span> <span style="color: #deb887;">"#+NAME: ?"</span>))
(add-to-list 'org-structure-template-alist '(<span style="color: #deb887;">"h"</span> <span style="color: #deb887;">"#+HEADER: ?"</span>))
(add-to-list 'org-structure-template-alist '(<span style="color: #deb887;">"p"</span> <span style="color: #deb887;">"#+PROPERTY: ?"</span>))
(add-to-list 'org-structure-template-alist '(<span style="color: #deb887;">"S"</span> <span style="color: #deb887;">"#+BEGIN_SRC ?\n\n#+END_SRC"</span>))

(add-to-list 'org-latex-packages-alist '(<span style="color: #deb887;">""</span> <span style="color: #deb887;">"physics"</span>))
(<span style="color: #00bfff;">setq</span> org-latex-remove-logfiles nil) <span style="color: #969896;">;; </span><span style="color: #969896;">evaluating latex blocks was causing errors because ox-latex couldn't find the logfiles</span>

(<span style="color: #00bfff;">setq</span> org-use-speed-commands t
      org-enforce-todo-dependencies t
      org-enforce-todo-checkbox-dependencies t
      org-return-follows-link t
      org-hide-leading-stars t
      org-clock-clocked-in-display 'mode-line
      org-refile-targets '((org-agenda-files <span style="color: #f08080;">:maxlevel</span> . 10))
      org-refile-use-outline-path t
      org-refile-allow-creating-parent-nodes '(confirm)
      org-tags-column -100
      org-src-preserve-indentation t
      org-src-window-setup 'current-window
      org-cycle-open-archived-trees t
      org-hide-block-startup t
      org-ellipsis <span style="color: #deb887;">" &#8230;"</span>)

(<span style="color: #00bfff;">setq</span> org--todo-todo-boxed-states '(<span style="color: #deb887;">"todo"</span> <span style="color: #deb887;">"incoming"</span> <span style="color: #deb887;">"captured"</span> <span style="color: #deb887;">"unread"</span>)
      org--todo-todo-states '(<span style="color: #deb887;">"&#9873;"</span>)
      org--blocked-todo-boxed-states '(<span style="color: #deb887;">"blocked"</span> <span style="color: #deb887;">"halted"</span> <span style="color: #deb887;">"stalled"</span> <span style="color: #deb887;">"paused"</span>)
      org--doing-todo-boxed-states '(<span style="color: #deb887;">"doing"</span> <span style="color: #deb887;">"going"</span>)
      org--doing-todo-states '(<span style="color: #deb887;">"&#9872;"</span>)
      org--delegated-todo-boxed-states '(<span style="color: #deb887;">"delegated"</span> <span style="color: #deb887;">"assigned"</span> <span style="color: #deb887;">"pr"</span>)
      org--done-todo-boxed-states '(<span style="color: #deb887;">"done"</span> <span style="color: #deb887;">"cancelled"</span> <span style="color: #deb887;">"canceled"</span> <span style="color: #deb887;">"finished"</span> <span style="color: #deb887;">"boom"</span> <span style="color: #deb887;">"read"</span>)
      org--done-todo-states '(<span style="color: #deb887;">"&#10008;"</span> <span style="color: #deb887;">"&#10004;"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--red-box-state</span> (s) `(,s <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"DarkRed"</span> <span style="color: #f08080;">:foreground</span> white <span style="color: #f08080;">:box</span> (<span style="color: #f08080;">:style</span> released-button)))
(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--red-state</span> (s) `(,s <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"Coral"</span>))
(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--blue-box-state</span> (s) `(,s <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"DeepSkyBlue4"</span> <span style="color: #f08080;">:foreground</span> white <span style="color: #f08080;">:box</span> (<span style="color: #f08080;">:style</span> released-button)))
(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--blue-state</span> (s) `(,s <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"DeepSkyBlue1"</span>))
(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--green-box-state</span> (s) `(,s <span style="color: #f08080;">:background</span> <span style="color: #deb887;">"DarkGreen"</span> <span style="color: #f08080;">:foreground</span> white <span style="color: #f08080;">:box</span> (<span style="color: #f08080;">:style</span> released-button)))
(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org--green-state</span> (s) `(,s <span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"LimeGreen"</span>))

(<span style="color: #00bfff;">setq</span> org-todo-keyword-faces (append (mapcar 'org--red-box-state org--todo-todo-boxed-states)
                                     (mapcar 'org--red-box-state (mapcar 'upcase org--todo-todo-boxed-states))

                                     (mapcar 'org--red-box-state org--blocked-todo-boxed-states)
                                     (mapcar 'org--red-box-state (mapcar 'upcase org--blocked-todo-boxed-states))

                                     (mapcar 'org--red-state org--todo-todo-states)

                                     (mapcar 'org--blue-box-state org--doing-todo-boxed-states)
                                     (mapcar 'org--blue-box-state (mapcar 'upcase org--doing-todo-boxed-states))

                                     (mapcar 'org--blue-box-state org--delegated-todo-boxed-states)
                                     (mapcar 'org--blue-box-state (mapcar 'upcase org--delegated-todo-boxed-states))

                                     (mapcar 'org--blue-state org--doing-todo-states)

                                     (mapcar 'org--green-box-state org--done-todo-boxed-states)
                                     (mapcar 'org--green-box-state (mapcar 'upcase org--done-todo-boxed-states))

                                     (mapcar 'org--green-state org--done-todo-states)
                                     ))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org-basic-seq-todo-config-words</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (insert <span style="color: #deb887;">"#+SEQ_TODO: todo doing | done"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org-basic-seq-todo-config-symbols</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (insert <span style="color: #deb887;">"#+SEQ_TODO: &#9873; &#9872; | &#10004;"</span>))

(<span style="color: #00bfff;">setq</span> org-pomodoro-format <span style="color: #deb887;">"Pomodoro %s"</span>
      org-pomodoro-short-break-format <span style="color: #deb887;">"Short Break %s"</span>
      org-pomodoro-long-break-format <span style="color: #deb887;">"Long Break %s"</span>
      org-pomodoro-ask-upon-killing nil
      org-pomodoro-short-break-sound-p nil
      org-pomodoro-long-break-sound-p nil)

(custom-set-faces `(org-pomodoro-mode-line ((nil (<span style="color: #f08080;">:foreground</span> <span style="color: #deb887;">"#2aa198"</span>))))
                  `(org-link ((nil (<span style="color: #f08080;">:underline</span> nil))))
                  `(org-date ((nil (<span style="color: #f08080;">:underline</span> nil)))))

(<span style="color: #00bfff;">setq</span> org-confirm-babel-evaluate nil)

(org-babel-do-load-languages 'org-babel-load-languages
                             '((emacs-lisp . t)
                               (http . t)
                               (translate . t)
                               (awk . t)
                               (calc . t)
                               (C . t)
                               (dot . t)
                               (R . t)
                               (haskell . t)
                               (java . t)
                               (js . t)
                               (latex . t)
                               (lisp . t)
                               (makefile . t)
                               (matlab . t)
                               (org . t)
                               (perl . t)
                               (plantuml . t)
                               (python . t)
                               (ruby . t)
                               (scala . t) <span style="color: #969896;">;; </span><span style="color: #969896;">there are conflicting versions in org &amp; scala-mode requiring ensime</span>
                               (scheme . t)
                               (shell . t)
                               (sql . t)))


(<span style="color: #00bfff;">setq</span> org-babel-default-header-args:sh '((<span style="color: #f08080;">:results</span> . <span style="color: #deb887;">"output"</span>))
      org-babel-default-header-args:http '((<span style="color: #f08080;">:pretty</span> . <span style="color: #deb887;">"yes"</span>)))

(<span style="color: #00bfff;">defconst</span> <span style="color: #e7c547;">org-babel-header-args:cmd</span> '((bg . <span style="color: #f08080;">:any</span>) (tmux . <span style="color: #f08080;">:any</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org-babel-execute:cmd</span> (body params)
  (<span style="color: #00bfff;">let*</span> ((bg-option (assoc <span style="color: #f08080;">:bg</span> params))
         (in-bg (<span style="color: #00bfff;">and</span> bg-option (not (string= (cdr bg-option) <span style="color: #deb887;">"no"</span>))))
         (tmux-option (assoc <span style="color: #f08080;">:tmux</span> params))
         (tmux-session (<span style="color: #00bfff;">or</span> (cdr tmux-option) <span style="color: #deb887;">"emacs"</span>)))
    (<span style="color: #00bfff;">if</span> tmux-option
        (<span style="color: #00bfff;">progn</span> (cmd-tmux body tmux-session) (format <span style="color: #deb887;">"Sent to tmux session: %s"</span> tmux-session))
      (<span style="color: #00bfff;">progn</span>
        (cmd-dwim nil body)
        (<span style="color: #00bfff;">when</span> in-bg (switch-to-buffer (other-buffer)))
        <span style="color: #deb887;">"Running command"</span>))))

(add-to-list 'org-src-lang-modes '(<span style="color: #deb887;">"cmd"</span>))

(<span style="color: #00bfff;">define-derived-mode</span> <span style="color: #daa520;">cmd-mode</span> sh-mode <span style="color: #deb887;">"cmd"</span>)

(<span style="color: #00bfff;">setq</span> org-babel-default-header-args:cmd '((<span style="color: #f08080;">:results</span> . <span style="color: #deb887;">"silent"</span>)))
</pre>
</div>

<p>
hacky way of using org tables for markdown tables <a href="http://stackoverflow.com/questions/14275122/editing-markdown-pipe-tables-in-emacs/26297700#26297700">copied from stackoverflow</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">org-table</span>)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">markdown-cleanup-org-tables</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">when</span> (<span style="color: #00bfff;">or</span> (eq major-mode 'markdown-mode) (eq major-mode 'gfm-mode))
    (<span style="color: #00bfff;">save-excursion</span>
      (goto-char (point-min))
      (<span style="color: #00bfff;">while</span> (search-forward <span style="color: #deb887;">"-+-"</span> nil t) (replace-match <span style="color: #deb887;">"-|-"</span>)))))

(add-hook 'markdown-mode-hook 'turn-on-orgtbl)
(advice-add 'org-table-align <span style="color: #f08080;">:after</span> 'markdown-cleanup-org-tables)

(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">markdown-table-create</span> 'org-table-create)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">markdown-table-insert-column</span> 'org-table-insert-column)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">markdown-table-delete-column</span> 'org-table-delete-column)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">markdown-table-insert-row</span> 'org-table-insert-row)
(<span style="color: #00bfff;">defalias</span> '<span style="color: #daa520;">markdown-table-delete-row</span> 'org-table-delete-row)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb5d706" class="outline-3">
<h3 id="orgfb5d706"><span class="section-number-3">3.11</span> sbt</h3>
<div class="outline-text-3" id="text-3-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sbt</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">if</span> (eq major-mode 'sbt-mode)
      (switch-to-buffer (other-buffer))
    (sbt-start)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sbt-current-tests-in-buffer</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">save-excursion</span>
    (<span style="color: #00bfff;">let*</span> ((pkg-name-components)
           (test-names))
      (goto-char (point-min))
      (<span style="color: #00bfff;">while</span> (re-search-forward <span style="color: #deb887;">"package "</span> nil t)
        (<span style="color: #00bfff;">push</span> (filter-buffer-substring (point) (point-at-eol)) pkg-name-components))
      (goto-char (point-min))
      (<span style="color: #00bfff;">while</span> (re-search-forward <span style="color: #deb887;">"</span><span style="color: #e7c547;">\\</span><span style="color: #c397d8;">(</span><span style="color: #deb887;">object</span><span style="color: #e7c547;">\\</span><span style="color: #c397d8;">|</span><span style="color: #deb887;">class</span><span style="color: #e7c547;">\\</span><span style="color: #c397d8;">)</span><span style="color: #deb887;"> "</span> nil t)
        (<span style="color: #00bfff;">push</span> (filter-buffer-substring (point) (<span style="color: #00bfff;">progn</span> (re-search-forward <span style="color: #deb887;">" "</span>)
                                                      (forward-char -1)
                                                      (point)))
              test-names))
      (<span style="color: #00bfff;">let*</span> ((full-pkg-name (string-join (reverse pkg-name-components) <span style="color: #deb887;">"."</span>))
             (full-test-names (mapcar #'(lambda (test-name) (string-join (list full-pkg-name <span style="color: #deb887;">"."</span> test-name))) test-names))
             (full-test-names-str (string-join full-test-names <span style="color: #deb887;">" "</span>)))
        (message full-test-names-str)))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sbt-test-only-current-test</span> (only-zzz)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> only-zzz
      (sbt-command (concat <span style="color: #deb887;">"test-only "</span> (sbt-current-tests-in-buffer) <span style="color: #deb887;">" -- showtimes -- ex zzz"</span>))
    (sbt-command (concat <span style="color: #deb887;">"test-only "</span> (sbt-current-tests-in-buffer) <span style="color: #deb887;">" -- showtimes"</span>))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sbt-compile</span> (test-compile)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> test-compile
      (sbt-command <span style="color: #deb887;">"test:compile"</span>)
    (sbt-command <span style="color: #deb887;">"compile"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sbt-turn-on-extra-bindings</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (local-set-key (kbd <span style="color: #deb887;">"C-c s s"</span>) 'sbt)
  (local-set-key (kbd <span style="color: #deb887;">"C-c s c"</span>) 'sbt-compile)
  (local-set-key (kbd <span style="color: #deb887;">"C-c s o"</span>) 'sbt-test-only-current-test)
  (local-set-key (kbd <span style="color: #deb887;">"C-c s p"</span>) 'sbt-run-previous-command))

(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">magit-mode</span>)

(add-hook 'scala-mode-hook 'sbt-turn-on-extra-bindings)
(add-hook 'sbt-mode-hook 'sbt-turn-on-extra-bindings)
(add-hook 'magit-mode-hook 'sbt-turn-on-extra-bindings)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c3134e" class="outline-3">
<h3 id="org2c3134e"><span class="section-number-3">3.12</span> sonic pi</h3>
<div class="outline-text-3" id="text-3-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">org</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">ob</span>)
(<span style="color: #00bfff;">require</span> '<span style="color: #a2cd5a;">subr-x</span>) <span style="color: #969896;">;; </span><span style="color: #969896;">string-trim</span>

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-server-running-p</span> ()
  (string= (string-trim (shell-command-to-string <span style="color: #deb887;">"sonic-pi check-server"</span>)) <span style="color: #deb887;">"Sonic Pi is running"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-server-cleanup-process-buffer</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (<span style="color: #00bfff;">when</span> (<span style="color: #00bfff;">and</span> (not (sonic-pi-server-running-p)) (get-buffer <span style="color: #deb887;">"*sonic pi*"</span>))
    (kill-buffer <span style="color: #deb887;">"*sonic pi*"</span>)))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-server</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (sonic-pi-server-cleanup-process-buffer)
  (jw--run-cmd <span style="color: #deb887;">"sonic-pi run-server"</span> <span style="color: #deb887;">"sonic pi"</span> nil
               '(lambda ()
                  (add-hook 'comint-output-filter-functions 'comint-truncate-buffer t t))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-server-start-if-needed</span> ()
  (<span style="color: #00bfff;">unless</span> (sonic-pi-server-running-p)
    (message <span style="color: #deb887;">"Sonic Pi server not running anywhere. Starting up..."</span>)
    (<span style="color: #00bfff;">save-window-excursion</span>
      (sonic-pi-server)
      (sleep-for 2.5))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-play</span> (<span style="color: #98f5ff;">&amp;optional</span> ruby)
  (<span style="color: #00bfff;">interactive</span>)
  (sonic-pi-server-start-if-needed)
  (<span style="color: #00bfff;">let</span> ((prepared-ruby (<span style="color: #00bfff;">or</span> ruby (<span style="color: #00bfff;">if</span> (region-active-p)
                                    (buffer-substring-no-properties (point) (mark))
                                  (buffer-substring-no-properties (point-min) (point-max))))))
    (shell-command (format <span style="color: #deb887;">"echo '%s' | sonic-pi"</span> prepared-ruby))))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-stop</span> ()
  (<span style="color: #00bfff;">interactive</span>)
  (shell-command <span style="color: #deb887;">"sonic-pi stop"</span>))

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">sonic-pi-stop-or-play</span> (arg)
  (<span style="color: #00bfff;">interactive</span> <span style="color: #deb887;">"P"</span>)
  (<span style="color: #00bfff;">if</span> arg (sonic-pi-stop) (sonic-pi-play)))

(define-key jw-keymap <span style="color: #deb887;">"M"</span> 'sonic-pi-server)
(define-key jw-keymap <span style="color: #deb887;">"m"</span> 'sonic-pi-stop-or-play)

(<span style="color: #00bfff;">defun</span> <span style="color: #daa520;">org-babel-execute:sonic-pi</span> (body params)
  (sonic-pi-play body)
  <span style="color: #deb887;">"Sent to Sonic Pi"</span>)

(add-to-list 'org-src-lang-modes '(<span style="color: #deb887;">"sonic-pi"</span>))

(<span style="color: #00bfff;">define-derived-mode</span> <span style="color: #daa520;">sonic-pi-mode</span> ruby-mode <span style="color: #deb887;">"sonic-pi"</span>)

(<span style="color: #00bfff;">setq</span> org-babel-default-header-args:sonic-pi '((<span style="color: #f08080;">:results</span> . <span style="color: #deb887;">"silent"</span>)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb53504d" class="outline-2">
<h2 id="orgb53504d"><span class="section-number-2">4</span> private</h2>
<div class="outline-text-2" id="text-4">
<p>
load the <code>private</code> directory and the <code>private.org</code> file if they exist
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #00bfff;">let</span> ((path (concat user-emacs-directory <span style="color: #deb887;">"private"</span>)))
  (<span style="color: #00bfff;">when</span> (file-exists-p path)
    (add-to-list 'load-path path)
    (mapcar 'load-file (directory-files path t <span style="color: #deb887;">"\.el$"</span>))))

(<span style="color: #00bfff;">let</span> ((private-org (concat user-emacs-directory <span style="color: #deb887;">"private.org"</span>)))
  (<span style="color: #00bfff;">when</span> (file-exists-p private-org)
    (org-babel-load-file private-org)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6860ba8" class="outline-2">
<h2 id="org6860ba8"><span class="section-number-2">5</span> finally</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(cd (getenv <span style="color: #deb887;">"HOME"</span>))
(fullscreen)
(server-start)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Joe Winder</p>
<p class="date">Created: 2016-12-17 Sat 12:55</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
